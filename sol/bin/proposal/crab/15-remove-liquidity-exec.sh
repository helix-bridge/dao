#!/usr/bin/env bash

set -eox pipefail

USDT=0x6a2d262D56735DbA19Dd70682B39F6bE9a931D98
USDC=0x81ECac0D6Be0550A00FF064a4f9dd2400585FE9c
xWRING=0x273131f7cb50ac002bdd08ca721988731f7e1092
WCRAB=0x2d2b97ea380b0185e9fdf8271d1afb5d2bf18329
USDT_xWRING_PAIR=0xb0fe91f4fa6ac7bedFB741FDf2d521766db4a925
USDC_CRAB_PAIR=0x75D4D59991D388Dd0e1c5224AF605a3E79e1f17e
ROUTER=0xaf5caa87a7d3718622604268c43ff6ce9d2cec3c
WALLET=0x0050F880c35c31c13BFd9cBb7D28AafaEcA3abd2
TIMELOCK=0x2401224012bAE7C2f217392665CA7abC16dCDE1e
SALT=0x000000000000000000000000000000000000000000000000000000000000000f
PREDECESSOR=0x0000000000000000000000000000000000000000000000000000000000000000
DELAY=1800
DEADLINE=1690425021

targets=[$USDT_xWRING_PAIR,$ROUTER,$USDC_CRAB_PAIR,$ROUTER]
values=[0,0,0,0]
datas=[0x095ea7b3000000000000000000000000af5caa87a7d3718622604268c43ff6ce9d2cec3c000000000000000000000000000000000000000000000000050d2502cbc625a6,0xbaa2abde000000000000000000000000273131f7cb50ac002bdd08ca721988731f7e10920000000000000000000000006a2d262d56735dba19dd70682b39f6be9a931d98000000000000000000000000000000000000000000000000050d2502cbc625a600000000000000000000000000000000000000000005d055f4d88702c0000000000000000000000000000000000000000000000000000000000000045112d8850000000000000000000000002401224012bae7c2f217392665ca7abc16dcde1e0000000000000000000000000000000000000000000000000000000064c1d6bd,0x095ea7b3000000000000000000000000af5caa87a7d3718622604268c43ff6ce9d2cec3c0000000000000000000000000000000000000000000000000c79d7d4b22c5cae,0xbaa2abde0000000000000000000000002d2b97ea380b0185e9fdf8271d1afb5d2bf1832900000000000000000000000081ecac0d6be0550a00ff064a4f9dd2400585fe9c0000000000000000000000000000000000000000000000000c79d7d4b22c5cae0000000000000000000000000000000000000000002f5675a08483c000000000000000000000000000000000000000000000000000000000000000033e9cc5660000000000000000000000002401224012bae7c2f217392665ca7abc16dcde1e0000000000000000000000000000000000000000000000000000000064c1d6bd]

data=$(seth calldata "scheduleBatch(address[],uint256[],bytes[],bytes32,bytes32,uint256)" $targets $values $datas $PREDECESSOR $SALT $DELAY)

op_hash=$(seth call $TIMELOCK "hashOperationBatch(address[],uint256[],bytes[],bytes32,bytes32)(bytes32)" $targets $values $datas $PREDECESSOR $SALT)
seth call $TIMELOCK "getTimestamp(bytes32)(uint)" $op_hash

seth send $TIMELOCK "executeBatch(address[],uint256[],bytes[],bytes32,bytes32)" $targets $values $datas $PREDECESSOR $SALT
